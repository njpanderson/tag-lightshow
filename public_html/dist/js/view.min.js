webpackJsonp([1],{

/***/ 123:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _Communicator = __webpack_require__(47);

var _Communicator2 = _interopRequireDefault(_Communicator);

var _constants = __webpack_require__(8);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Handles the view frame communication with the App class.
 * @class
 */
var View = function View() {
	var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

	this.settings = settings;
	this._comms = new _Communicator2.default('view', window.location.origin, {
		message: this._handleAppMessage.bind(this)
	});

	this._comms.registerGuestAddress('app', window.top);

	this._scripts = [];
	this._callbacks = {};
};

View.prototype = {
	/**
  * Produces a dialog using the App class. Uses a callback workflow to avoid reliance
  * on Promise polyfills or ES2015.
  * @param {string} title - See {@link App#dialog}
  * @param {mixes} message - See {@link App#dialog}
  * @param {array} [buttons] - See {@link App#dialog}
  * @param {function} [after] - Callback function to invoke once the dialog has been completed.
  */
	dialog: function dialog(title, message) {
		var buttons = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
		var after = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;

		var id;

		// send a dialog command to the App class
		id = this._comms.send('app', {
			cmd: _constants.messageCommands.DIALOG,
			data: {
				title: title,
				message: message,
				buttons: buttons
			}
		});

		// store the callback for later invocation, based on the generated message ID
		this._callbacks[id] = after;
	},

	/**
  * Handles messages sent via the Communicator class (mainly from the UI class).
  * @param {object} message - Data, as sent by the originator
  * @param {string} id - Message ID.
  */
	_handleAppMessage: function _handleAppMessage(message, id) {
		switch (message.cmd) {
			case _constants.messageCommands.RELOAD:
				// reload request
				this.settings.container.innerHTML = message.data.markup;

				this._evalScripts();
				break;

			case _constants.messageCommands.RESET:
				this._reset();
				break;

			case _constants.messageCommands.DIALOG_CALLBACK:
				// message from a dialog triggered with View#dialog
				if (this._callbacks[id]) {
					// id exists within callack object, fire and delete
					this._callbacks[id].apply(this, [message.data, message.action, message.action_data]);

					this._callbacks[id] = null;
				}
		}
	},

	/**
  * Gather scripts (besides view script) and re-insert in order
  */
	_evalScripts: function _evalScripts() {
		var _this = this;

		this._scripts = [];

		document.querySelectorAll('.view script').forEach(function (script, index) {
			var new_script;

			new_script = document.createElement('script');
			new_script.src = script.src;
			new_script.type = script.type;
			new_script.onload = function () {
				this._loadScript(index + 1);
			}.bind(_this);

			_this._scripts.push({
				new: new_script,
				old: script
			});
		});

		this._loadScript(0);
	},

	_loadScript: function _loadScript(index) {
		if (this._scripts[index]) {
			this._scripts[index].old.parentNode.replaceChild(this._scripts[index].new, this._scripts[index].old);
		}
	},

	_reset: function _reset() {
		this.settings.container.innerHTML = '';
	}
};

exports.default = View;

/***/ }),

/***/ 314:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var View = __webpack_require__(123).default;

window.view = new View({
	container: document.querySelector('.view')
});

/***/ }),

/***/ 47:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
var Communicator = function Communicator(id, origin) {
	var callbacks = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

	if (typeof id !== 'string') {
		throw new Error('Please choose a string-based ID for the guest.');
	}

	if (typeof origin !== 'string') {
		throw new Error('Please choose a string-based origin address.');
	}

	this._settings = {
		name: 'tag-comm-data'
	};

	this._guests = {};
	this._queue = {};
	this.id = id;
	this.message_index = 0;

	this._origin = origin;
	this._callbacks = Object.assign({
		message: null
	}, callbacks);

	window.addEventListener('message', this._receiveMessage.bind(this), false);

	this._sendPing();
};

Communicator.prototype = {
	/**
  * Attempt to ping source window
  */
	_sendPing: function _sendPing(node) {
		var ping = this._createMessage(null, {
			ping: this.id
		});

		if (!node) {
			if (window.opener) {
				node = window.opener;
			} else if (window.top !== window) {
				node = window.top;
			}
		}

		if (node) {
			this._post(node, ping);
		}
	},

	_sendPong: function _sendPong(node) {
		var pong = this._createMessage(null, {
			pong: this.id
		});

		this._post(node, pong);
	},

	/**
  * Registers a single guest for communication purposes.
  * @param {string} id - Guest ID. Used when sending messages.
  * @param {mixed} dest - Destination node.
  */
	registerGuestAddress: function registerGuestAddress(id, dest) {
		if (typeof dest === 'undefined') {
			throw new Error('Cannot register address for ' + id + '. ' + 'A guest address DOM node, window or frame must be defined.');
		}

		if (!('postMessage' in dest)) {
			throw new Error('Communicator cannot send messages to destination. Please choose an HTMLElement ' + 'that supports the postMessage method');
		}

		if (typeof id !== 'string') {
			throw new Error('Please choose a string-based ID for the guest.');
		}

		// register local address for guest
		this._setGuestData(id, {
			id: id,
			node: dest
		});

		// start timer
		if (this.timer) {
			window.clearInterval(this.timer);
		}
	},

	/**
  * Sets or replaces the guest data.
  * @param {string} id - Guest ID.
  * @param {object} data - Guest data.
  * @private
  */
	_setGuestData: function _setGuestData(id, data) {
		if (!this._guests[id]) {
			this._guests[id] = {
				live: false,
				node: null
			};
		}

		Object.assign(this._guests[id], data);
	},

	/**
  * @param {string} to - Guest ID, as stored.
  * @param {mixed} message - Any JS compatible data to send as a message.
  * @param {string} id - Add a message ID to allow the recipient to prevent race conditions.
  * @description
  * Sends a message to the defined guest.
  * If no ID is defined, one will be generated.
  * @returns {string} The ID of the message as defined or generated.
  */
	send: function send(to, message) {
		var id = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;

		var guest = this._getGuestById(to);

		id = id || this._generateSendId(to);

		if (guest && guest.live) {
			// post message immediately
			this._post(to, this._createMessage(message, {}, id));
		} else {
			// queue message for posting
			this._addToQueue(to, message, id);
		}

		return id;
	},

	/**
  * Adds a message to the local 'outbox' for the guest (by ID).
  */
	_addToQueue: function _addToQueue(to, message, id) {
		if (!this._queue[to]) {
			this._queue[to] = [];
		}

		this._queue[to].push({
			message: message,
			id: id
		});
	},

	_sendQueue: function _sendQueue(to) {
		var a;

		if (this._queue[to] && this._guests[to]) {
			// send messages in the order they were queued
			for (a = 0; a < this._queue[to].length; a += 1) {
				this._post(this._guests[to].node, this._createMessage(this._queue[to][a].message, {}, this._queue[to][a].id));
			}

			// clear queue for this recipient
			this._queue[to] = [];
		}
	},

	/**
  * Gets a communicator guest by its ID, or returns `null`.
  * @returns {mixed} Guest data, or `null`.
  * @private
  */
	_getGuestById: function _getGuestById(id) {
		return this._guests[id] || null;
	},

	/**
  * Get a guest by known node (i.e. that registered in `this._guests`)
  * @private
  */
	_getGuestByNode: function _getGuestByNode(node) {
		var id;

		for (id in this._guests) {
			if (this._guests.hasOwnProperty(id) && this._guests[id].node === node) {
				return this._getGuestById(id);
			}
		}

		return null;
	},

	/**
  * Actually posts the message to the destination.
  * @param {string} to - Guest ID.
  * @param {mixed} message - Any JS compatible data to send as a message.
  * @private
  */
	_post: function _post(to, message) {
		var guest, node;

		if (typeof to === 'string') {
			guest = this._getGuestById(to);

			if (!guest.node) {
				throw new Error('Cannot communicate with guest "' + to + '". Has its Node address been registered?');
			}

			node = guest.node;
		} else {
			node = to;
		}

		node.postMessage(message, this._origin);
	},

	/**
  * Invoked when a live message is received.
  * @private
  */
	_receiveMessage: function _receiveMessage(event) {
		var origin = event.origin || event.originalEvent.origin,
		    source = event.source || event.originalEvent.source,
		    message = event.data,
		    guest;

		if (origin !== location.origin) return;

		if ((message.ping || message.pong) && this._getGuestByNode(source)) {
			// received a ping/pong from valid source
			guest = message.ping || message.pong;

			this._setGuestLive(guest);
			this._sendQueue(guest);

			if (message.ping) {
				// pong back a ping (don't pong a pong or we'll be here forever)
				this._sendPong(source);
			}
		}

		if (this._callbacks.message && message.originalMessage) {
			this._callbacks.message(message.originalMessage, message.id);
		}
	},

	_setGuestLive: function _setGuestLive(id) {
		this._setGuestData(id, {
			live: true
		});
	},

	_createMessage: function _createMessage(message, data, id) {
		return Object.assign({}, data, {
			host: this.id,
			id: id,
			originalMessage: message
		});
	},

	_generateSendId: function _generateSendId(prefix) {
		if (window.performance && 'now' in window.performance) {
			return prefix + '-xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
				var r = (window.performance.now() + Math.random() * 16) % 16 | 0;
				return (c === 'x' ? r : r & 0x3 | 0x8).toString(16);
			});
		} else {
			return prefix + '-' + this.message_index++;
		}
	}
};

exports.default = Communicator;

/***/ }),

/***/ 8:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
/**
 * @module assets/constants
 */

/**
 * Action types
 * @private
 */
var actionTypes = exports.actionTypes = {
	UI_STATE: 'ui-state',
	ZONE_ADD_ATTACHMENT: 'zone-add-attachment',
	ZONE_EDIT_ATTACHMENT: 'zone-edit-attachment',
	ZONE_DETACH_ATTACHMENT: 'zone-detach-attachment',
	ZONE_CLEAR_ALL_ATTACHMENTS: 'zone-clear-all-attachments',
	SET_DIALOG_MODE: 'set-dialog-mode',
	SET_ACTIVE_DROPLET: 'set-active-droplet',
	SET_TOUR_STAGE: 'set-tour-stage',
	SHOW_TOOLTIP: 'show-tooltip',
	HIDE_TOOLTIP: 'hide-tooltip',
	SET_TOOLTIP_CONTENT: 'set-tooltip-content',
	COMPLETE_FIRST_DROP: 'complete-first-drop',
	COMPLETE_LAST_DROP: 'complete-last-drop',
	RESET_APP: 'reset-app'
};

/**
 * Dialog modes
 */
var dialogModes = exports.dialogModes = {
	NONE: 'none',
	GENERAL: 'general',
	EDIT_DROPLET: 'edit-droplet',
	TOUR: 'tour'
};

var uiStates = exports.uiStates = {
	INITIALISING: 'initialising',
	ACTIVE: 'active'
};

var messageCommands = exports.messageCommands = {
	RELOAD: 'reload',
	RESET: 'reset',
	DIALOG: 'dialog',
	DIALOG_CALLBACK: 'dialog-callback'
};

var errorCodes = exports.errorCodes = {
	NOT_A_DROPLET: 'A valid Droplet instance must be passed to DropZone#willAccept.'
};

var setLabels = exports.setLabels = {
	value: 'Value',
	attrs: 'Attributes',
	tagName: 'Tag name',
	innerHTML: 'HTML content'
};

/***/ })

},[314]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L25qcC10YWcvc3JjL1ZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3ZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9uanAtdGFnL3NyYy9saWIvQ29tbXVuaWNhdG9yLmpzPzI1NzQiLCJ3ZWJwYWNrOi8vLy4vfi9uanAtdGFnL3NyYy9hc3NldHMvY29uc3RhbnRzLmpzP2Y5ZDQiXSwibmFtZXMiOlsiVmlldyIsInNldHRpbmdzIiwiX2NvbW1zIiwid2luZG93IiwibG9jYXRpb24iLCJvcmlnaW4iLCJtZXNzYWdlIiwiX2hhbmRsZUFwcE1lc3NhZ2UiLCJiaW5kIiwicmVnaXN0ZXJHdWVzdEFkZHJlc3MiLCJ0b3AiLCJfc2NyaXB0cyIsIl9jYWxsYmFja3MiLCJwcm90b3R5cGUiLCJkaWFsb2ciLCJ0aXRsZSIsImJ1dHRvbnMiLCJhZnRlciIsImlkIiwic2VuZCIsImNtZCIsIkRJQUxPRyIsImRhdGEiLCJSRUxPQUQiLCJjb250YWluZXIiLCJpbm5lckhUTUwiLCJtYXJrdXAiLCJfZXZhbFNjcmlwdHMiLCJSRVNFVCIsIl9yZXNldCIsIkRJQUxPR19DQUxMQkFDSyIsImFwcGx5IiwiYWN0aW9uIiwiYWN0aW9uX2RhdGEiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwic2NyaXB0IiwiaW5kZXgiLCJuZXdfc2NyaXB0IiwiY3JlYXRlRWxlbWVudCIsInNyYyIsInR5cGUiLCJvbmxvYWQiLCJfbG9hZFNjcmlwdCIsInB1c2giLCJuZXciLCJvbGQiLCJwYXJlbnROb2RlIiwicmVwbGFjZUNoaWxkIiwicmVxdWlyZSIsImRlZmF1bHQiLCJ2aWV3IiwicXVlcnlTZWxlY3RvciIsIkNvbW11bmljYXRvciIsImNhbGxiYWNrcyIsIkVycm9yIiwiX3NldHRpbmdzIiwibmFtZSIsIl9ndWVzdHMiLCJfcXVldWUiLCJtZXNzYWdlX2luZGV4IiwiX29yaWdpbiIsIk9iamVjdCIsImFzc2lnbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfcmVjZWl2ZU1lc3NhZ2UiLCJfc2VuZFBpbmciLCJub2RlIiwicGluZyIsIl9jcmVhdGVNZXNzYWdlIiwib3BlbmVyIiwiX3Bvc3QiLCJfc2VuZFBvbmciLCJwb25nIiwiZGVzdCIsIl9zZXRHdWVzdERhdGEiLCJ0aW1lciIsImNsZWFySW50ZXJ2YWwiLCJsaXZlIiwidG8iLCJndWVzdCIsIl9nZXRHdWVzdEJ5SWQiLCJfZ2VuZXJhdGVTZW5kSWQiLCJfYWRkVG9RdWV1ZSIsIl9zZW5kUXVldWUiLCJhIiwibGVuZ3RoIiwiX2dldEd1ZXN0QnlOb2RlIiwiaGFzT3duUHJvcGVydHkiLCJwb3N0TWVzc2FnZSIsImV2ZW50Iiwib3JpZ2luYWxFdmVudCIsInNvdXJjZSIsIl9zZXRHdWVzdExpdmUiLCJvcmlnaW5hbE1lc3NhZ2UiLCJob3N0IiwicHJlZml4IiwicGVyZm9ybWFuY2UiLCJyZXBsYWNlIiwiYyIsInIiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJhY3Rpb25UeXBlcyIsIlVJX1NUQVRFIiwiWk9ORV9BRERfQVRUQUNITUVOVCIsIlpPTkVfRURJVF9BVFRBQ0hNRU5UIiwiWk9ORV9ERVRBQ0hfQVRUQUNITUVOVCIsIlpPTkVfQ0xFQVJfQUxMX0FUVEFDSE1FTlRTIiwiU0VUX0RJQUxPR19NT0RFIiwiU0VUX0FDVElWRV9EUk9QTEVUIiwiU0VUX1RPVVJfU1RBR0UiLCJTSE9XX1RPT0xUSVAiLCJISURFX1RPT0xUSVAiLCJTRVRfVE9PTFRJUF9DT05URU5UIiwiQ09NUExFVEVfRklSU1RfRFJPUCIsIkNPTVBMRVRFX0xBU1RfRFJPUCIsIlJFU0VUX0FQUCIsImRpYWxvZ01vZGVzIiwiTk9ORSIsIkdFTkVSQUwiLCJFRElUX0RST1BMRVQiLCJUT1VSIiwidWlTdGF0ZXMiLCJJTklUSUFMSVNJTkciLCJBQ1RJVkUiLCJtZXNzYWdlQ29tbWFuZHMiLCJlcnJvckNvZGVzIiwiTk9UX0FfRFJPUExFVCIsInNldExhYmVscyIsInZhbHVlIiwiYXR0cnMiLCJ0YWdOYW1l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LGVBQWMsY0FIWTtBQUkxQkMsT0FBTTtBQUpvQixDQUFwQjs7QUFPQSxJQUFNQyw4QkFBVztBQUN2QkMsZUFBYyxjQURTO0FBRXZCQyxTQUFRO0FBRmUsQ0FBakI7O0FBS0EsSUFBTUMsNENBQWtCO0FBQzlCMUcsU0FBUSxRQURzQjtBQUU5QkssUUFBTyxPQUZ1QjtBQUc5QlAsU0FBUSxRQUhzQjtBQUk5QlMsa0JBQWlCO0FBSmEsQ0FBeEI7O0FBT0EsSUFBTW9HLGtDQUFhO0FBQ3pCQyxnQkFBZTtBQURVLENBQW5COztBQUlBLElBQU1DLGdDQUFZO0FBQ3hCQyxRQUFPLE9BRGlCO0FBRXhCQyxRQUFPLFlBRmlCO0FBR3hCQyxVQUFTLFVBSGU7QUFJeEI5RyxZQUFXO0FBSmEsQ0FBbEIsQyIsImZpbGUiOiJ2aWV3Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb21tdW5pY2F0b3IgZnJvbSAnLi9saWIvQ29tbXVuaWNhdG9yJztcbmltcG9ydCB7IG1lc3NhZ2VDb21tYW5kcyB9IGZyb20gJy4vYXNzZXRzL2NvbnN0YW50cyc7XG5cbi8qKlxuICogSGFuZGxlcyB0aGUgdmlldyBmcmFtZSBjb21tdW5pY2F0aW9uIHdpdGggdGhlIEFwcCBjbGFzcy5cbiAqIEBjbGFzc1xuICovXG52YXIgVmlldyA9IGZ1bmN0aW9uKHNldHRpbmdzID0ge30pIHtcblx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuXHR0aGlzLl9jb21tcyA9IG5ldyBDb21tdW5pY2F0b3IoJ3ZpZXcnLCB3aW5kb3cubG9jYXRpb24ub3JpZ2luLCB7XG5cdFx0bWVzc2FnZTogdGhpcy5faGFuZGxlQXBwTWVzc2FnZS5iaW5kKHRoaXMpXG5cdH0pO1xuXG5cdHRoaXMuX2NvbW1zLnJlZ2lzdGVyR3Vlc3RBZGRyZXNzKCdhcHAnLCB3aW5kb3cudG9wKTtcblxuXHR0aGlzLl9zY3JpcHRzID0gW107XG5cdHRoaXMuX2NhbGxiYWNrcyA9IHt9O1xufTtcblxuVmlldy5wcm90b3R5cGUgPSB7XG5cdC8qKlxuXHQgKiBQcm9kdWNlcyBhIGRpYWxvZyB1c2luZyB0aGUgQXBwIGNsYXNzLiBVc2VzIGEgY2FsbGJhY2sgd29ya2Zsb3cgdG8gYXZvaWQgcmVsaWFuY2Vcblx0ICogb24gUHJvbWlzZSBwb2x5ZmlsbHMgb3IgRVMyMDE1LlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdGl0bGUgLSBTZWUge0BsaW5rIEFwcCNkaWFsb2d9XG5cdCAqIEBwYXJhbSB7bWl4ZXN9IG1lc3NhZ2UgLSBTZWUge0BsaW5rIEFwcCNkaWFsb2d9XG5cdCAqIEBwYXJhbSB7YXJyYXl9IFtidXR0b25zXSAtIFNlZSB7QGxpbmsgQXBwI2RpYWxvZ31cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gW2FmdGVyXSAtIENhbGxiYWNrIGZ1bmN0aW9uIHRvIGludm9rZSBvbmNlIHRoZSBkaWFsb2cgaGFzIGJlZW4gY29tcGxldGVkLlxuXHQgKi9cblx0ZGlhbG9nOiBmdW5jdGlvbih0aXRsZSwgbWVzc2FnZSwgYnV0dG9ucyA9IFtdLCBhZnRlciA9IG51bGwpIHtcblx0XHR2YXIgaWQ7XG5cblx0XHQvLyBzZW5kIGEgZGlhbG9nIGNvbW1hbmQgdG8gdGhlIEFwcCBjbGFzc1xuXHRcdGlkID0gdGhpcy5fY29tbXMuc2VuZCgnYXBwJywge1xuXHRcdFx0Y21kOiBtZXNzYWdlQ29tbWFuZHMuRElBTE9HLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHR0aXRsZSxcblx0XHRcdFx0bWVzc2FnZSxcblx0XHRcdFx0YnV0dG9uc1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gc3RvcmUgdGhlIGNhbGxiYWNrIGZvciBsYXRlciBpbnZvY2F0aW9uLCBiYXNlZCBvbiB0aGUgZ2VuZXJhdGVkIG1lc3NhZ2UgSURcblx0XHR0aGlzLl9jYWxsYmFja3NbaWRdID0gYWZ0ZXI7XG5cdH0sXG5cblx0LyoqXG5cdCAqIEhhbmRsZXMgbWVzc2FnZXMgc2VudCB2aWEgdGhlIENvbW11bmljYXRvciBjbGFzcyAobWFpbmx5IGZyb20gdGhlIFVJIGNsYXNzKS5cblx0ICogQHBhcmFtIHtvYmplY3R9IG1lc3NhZ2UgLSBEYXRhLCBhcyBzZW50IGJ5IHRoZSBvcmlnaW5hdG9yXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIE1lc3NhZ2UgSUQuXG5cdCAqL1xuXHRfaGFuZGxlQXBwTWVzc2FnZTogZnVuY3Rpb24obWVzc2FnZSwgaWQpIHtcblx0XHRzd2l0Y2ggKG1lc3NhZ2UuY21kKSB7XG5cdFx0Y2FzZSBtZXNzYWdlQ29tbWFuZHMuUkVMT0FEOlxuXHRcdFx0Ly8gcmVsb2FkIHJlcXVlc3Rcblx0XHRcdHRoaXMuc2V0dGluZ3MuY29udGFpbmVyLmlubmVySFRNTCA9IG1lc3NhZ2UuZGF0YS5tYXJrdXA7XG5cblx0XHRcdHRoaXMuX2V2YWxTY3JpcHRzKCk7XG5cdFx0XHRicmVhaztcblxuXHRcdGNhc2UgbWVzc2FnZUNvbW1hbmRzLlJFU0VUOlxuXHRcdFx0dGhpcy5fcmVzZXQoKTtcblx0XHRcdGJyZWFrO1xuXG5cdFx0Y2FzZSBtZXNzYWdlQ29tbWFuZHMuRElBTE9HX0NBTExCQUNLOlxuXHRcdFx0Ly8gbWVzc2FnZSBmcm9tIGEgZGlhbG9nIHRyaWdnZXJlZCB3aXRoIFZpZXcjZGlhbG9nXG5cdFx0XHRpZiAodGhpcy5fY2FsbGJhY2tzW2lkXSkge1xuXHRcdFx0XHQvLyBpZCBleGlzdHMgd2l0aGluIGNhbGxhY2sgb2JqZWN0LCBmaXJlIGFuZCBkZWxldGVcblx0XHRcdFx0dGhpcy5fY2FsbGJhY2tzW2lkXS5hcHBseSh0aGlzLCBbXG5cdFx0XHRcdFx0bWVzc2FnZS5kYXRhLFxuXHRcdFx0XHRcdG1lc3NhZ2UuYWN0aW9uLFxuXHRcdFx0XHRcdG1lc3NhZ2UuYWN0aW9uX2RhdGFcblx0XHRcdFx0XSk7XG5cblx0XHRcdFx0dGhpcy5fY2FsbGJhY2tzW2lkXSA9IG51bGw7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8qKlxuXHQgKiBHYXRoZXIgc2NyaXB0cyAoYmVzaWRlcyB2aWV3IHNjcmlwdCkgYW5kIHJlLWluc2VydCBpbiBvcmRlclxuXHQgKi9cblx0X2V2YWxTY3JpcHRzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLl9zY3JpcHRzID0gW107XG5cblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudmlldyBzY3JpcHQnKS5mb3JFYWNoKChzY3JpcHQsIGluZGV4KSA9PiB7XG5cdFx0XHR2YXIgbmV3X3NjcmlwdDtcblxuXHRcdFx0bmV3X3NjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXHRcdFx0bmV3X3NjcmlwdC5zcmMgPSBzY3JpcHQuc3JjO1xuXHRcdFx0bmV3X3NjcmlwdC50eXBlID0gc2NyaXB0LnR5cGU7XG5cdFx0XHRuZXdfc2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aGlzLl9sb2FkU2NyaXB0KGluZGV4ICsgMSk7XG5cdFx0XHR9LmJpbmQodGhpcyk7XG5cblx0XHRcdHRoaXMuX3NjcmlwdHMucHVzaCh7XG5cdFx0XHRcdG5ldzogbmV3X3NjcmlwdCxcblx0XHRcdFx0b2xkOiBzY3JpcHRcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy5fbG9hZFNjcmlwdCgwKTtcblx0fSxcblxuXHRfbG9hZFNjcmlwdDogZnVuY3Rpb24oaW5kZXgpIHtcblx0XHRpZiAodGhpcy5fc2NyaXB0c1tpbmRleF0pIHtcblx0XHRcdHRoaXMuX3NjcmlwdHNbaW5kZXhdLm9sZC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChcblx0XHRcdFx0dGhpcy5fc2NyaXB0c1tpbmRleF0ubmV3LFxuXHRcdFx0XHR0aGlzLl9zY3JpcHRzW2luZGV4XS5vbGRcblx0XHRcdCk7XG5cdFx0fVxuXHR9LFxuXG5cdF9yZXNldDogZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5zZXR0aW5ncy5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG5cdH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFZpZXc7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9uanAtdGFnL3NyYy9WaWV3LmpzIiwiY29uc3QgVmlldyA9IHJlcXVpcmUoJ25qcC10YWcvc3JjL1ZpZXcnKS5kZWZhdWx0O1xuXG53aW5kb3cudmlldyA9IG5ldyBWaWV3KHtcblx0Y29udGFpbmVyOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlldycpXG59KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvdmlldy5qcyIsInZhciBDb21tdW5pY2F0b3IgPSBmdW5jdGlvbihpZCwgb3JpZ2luLCBjYWxsYmFja3MgPSB7fSkge1xuXHRpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuXHRcdHRocm93IG5ldyBFcnJvcignUGxlYXNlIGNob29zZSBhIHN0cmluZy1iYXNlZCBJRCBmb3IgdGhlIGd1ZXN0LicpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBvcmlnaW4gIT09ICdzdHJpbmcnKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgY2hvb3NlIGEgc3RyaW5nLWJhc2VkIG9yaWdpbiBhZGRyZXNzLicpO1xuXHR9XG5cblx0dGhpcy5fc2V0dGluZ3MgPSB7XG5cdFx0bmFtZTogJ3RhZy1jb21tLWRhdGEnXG5cdH07XG5cblx0dGhpcy5fZ3Vlc3RzID0ge307XG5cdHRoaXMuX3F1ZXVlID0ge307XG5cdHRoaXMuaWQgPSBpZDtcblx0dGhpcy5tZXNzYWdlX2luZGV4ID0gMDtcblxuXHR0aGlzLl9vcmlnaW4gPSBvcmlnaW47XG5cdHRoaXMuX2NhbGxiYWNrcyA9IE9iamVjdC5hc3NpZ24oe1xuXHRcdG1lc3NhZ2U6IG51bGxcblx0fSwgY2FsbGJhY2tzKTtcblxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuX3JlY2VpdmVNZXNzYWdlLmJpbmQodGhpcyksIGZhbHNlKTtcblxuXHR0aGlzLl9zZW5kUGluZygpO1xufTtcblxuQ29tbXVuaWNhdG9yLnByb3RvdHlwZSA9IHtcblx0LyoqXG5cdCAqIEF0dGVtcHQgdG8gcGluZyBzb3VyY2Ugd2luZG93XG5cdCAqL1xuXHRfc2VuZFBpbmc6IGZ1bmN0aW9uKG5vZGUpIHtcblx0XHR2YXIgcGluZyA9IHRoaXMuX2NyZWF0ZU1lc3NhZ2UobnVsbCwge1xuXHRcdFx0cGluZzogdGhpcy5pZFxuXHRcdH0pO1xuXG5cdFx0aWYgKCFub2RlKSB7XG5cdFx0XHRpZiAod2luZG93Lm9wZW5lcikge1xuXHRcdFx0XHRub2RlID0gd2luZG93Lm9wZW5lcjtcblx0XHRcdH0gZWxzZSBpZiAod2luZG93LnRvcCAhPT0gd2luZG93KSB7XG5cdFx0XHRcdG5vZGUgPSB3aW5kb3cudG9wO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChub2RlKSB7XG5cdFx0XHR0aGlzLl9wb3N0KG5vZGUsIHBpbmcpO1xuXHRcdH1cblx0fSxcblxuXHRfc2VuZFBvbmc6IGZ1bmN0aW9uKG5vZGUpIHtcblx0XHR2YXIgcG9uZyA9IHRoaXMuX2NyZWF0ZU1lc3NhZ2UobnVsbCwge1xuXHRcdFx0cG9uZzogdGhpcy5pZFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5fcG9zdChub2RlLCBwb25nKTtcblx0fSxcblxuXHQvKipcblx0ICogUmVnaXN0ZXJzIGEgc2luZ2xlIGd1ZXN0IGZvciBjb21tdW5pY2F0aW9uIHB1cnBvc2VzLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBHdWVzdCBJRC4gVXNlZCB3aGVuIHNlbmRpbmcgbWVzc2FnZXMuXG5cdCAqIEBwYXJhbSB7bWl4ZWR9IGRlc3QgLSBEZXN0aW5hdGlvbiBub2RlLlxuXHQgKi9cblx0cmVnaXN0ZXJHdWVzdEFkZHJlc3M6IGZ1bmN0aW9uKGlkLCBkZXN0KSB7XG5cdFx0aWYgKHR5cGVvZiBkZXN0ID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHQnQ2Fubm90IHJlZ2lzdGVyIGFkZHJlc3MgZm9yICcgKyBpZCArICcuICcgK1xuXHRcdFx0XHQnQSBndWVzdCBhZGRyZXNzIERPTSBub2RlLCB3aW5kb3cgb3IgZnJhbWUgbXVzdCBiZSBkZWZpbmVkLidcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0aWYgKCEoJ3Bvc3RNZXNzYWdlJyBpbiBkZXN0KSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHQnQ29tbXVuaWNhdG9yIGNhbm5vdCBzZW5kIG1lc3NhZ2VzIHRvIGRlc3RpbmF0aW9uLiBQbGVhc2UgY2hvb3NlIGFuIEhUTUxFbGVtZW50ICcgK1xuXHRcdFx0XHQndGhhdCBzdXBwb3J0cyB0aGUgcG9zdE1lc3NhZ2UgbWV0aG9kJ1xuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgY2hvb3NlIGEgc3RyaW5nLWJhc2VkIElEIGZvciB0aGUgZ3Vlc3QuJyk7XG5cdFx0fVxuXG5cdFx0Ly8gcmVnaXN0ZXIgbG9jYWwgYWRkcmVzcyBmb3IgZ3Vlc3Rcblx0XHR0aGlzLl9zZXRHdWVzdERhdGEoaWQsIHtcblx0XHRcdGlkLFxuXHRcdFx0bm9kZTogZGVzdFxuXHRcdH0pO1xuXG5cdFx0Ly8gc3RhcnQgdGltZXJcblx0XHRpZiAodGhpcy50aW1lcikge1xuXHRcdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XG5cdFx0fVxuXHR9LFxuXG5cdC8qKlxuXHQgKiBTZXRzIG9yIHJlcGxhY2VzIHRoZSBndWVzdCBkYXRhLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBHdWVzdCBJRC5cblx0ICogQHBhcmFtIHtvYmplY3R9IGRhdGEgLSBHdWVzdCBkYXRhLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0X3NldEd1ZXN0RGF0YTogZnVuY3Rpb24oaWQsIGRhdGEpIHtcblx0XHRpZiAoIXRoaXMuX2d1ZXN0c1tpZF0pIHtcblx0XHRcdHRoaXMuX2d1ZXN0c1tpZF0gPSB7XG5cdFx0XHRcdGxpdmU6IGZhbHNlLFxuXHRcdFx0XHRub2RlOiBudWxsXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdE9iamVjdC5hc3NpZ24odGhpcy5fZ3Vlc3RzW2lkXSwgZGF0YSk7XG5cdH0sXG5cblx0LyoqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB0byAtIEd1ZXN0IElELCBhcyBzdG9yZWQuXG5cdCAqIEBwYXJhbSB7bWl4ZWR9IG1lc3NhZ2UgLSBBbnkgSlMgY29tcGF0aWJsZSBkYXRhIHRvIHNlbmQgYXMgYSBtZXNzYWdlLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBBZGQgYSBtZXNzYWdlIElEIHRvIGFsbG93IHRoZSByZWNpcGllbnQgdG8gcHJldmVudCByYWNlIGNvbmRpdGlvbnMuXG5cdCAqIEBkZXNjcmlwdGlvblxuXHQgKiBTZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIGRlZmluZWQgZ3Vlc3QuXG5cdCAqIElmIG5vIElEIGlzIGRlZmluZWQsIG9uZSB3aWxsIGJlIGdlbmVyYXRlZC5cblx0ICogQHJldHVybnMge3N0cmluZ30gVGhlIElEIG9mIHRoZSBtZXNzYWdlIGFzIGRlZmluZWQgb3IgZ2VuZXJhdGVkLlxuXHQgKi9cblx0c2VuZDogZnVuY3Rpb24odG8sIG1lc3NhZ2UsIGlkID0gbnVsbCkge1xuXHRcdHZhciBndWVzdCA9IHRoaXMuX2dldEd1ZXN0QnlJZCh0byk7XG5cblx0XHRpZCA9IChpZCB8fCB0aGlzLl9nZW5lcmF0ZVNlbmRJZCh0bykpO1xuXG5cdFx0aWYgKGd1ZXN0ICYmIGd1ZXN0LmxpdmUpIHtcblx0XHRcdC8vIHBvc3QgbWVzc2FnZSBpbW1lZGlhdGVseVxuXHRcdFx0dGhpcy5fcG9zdCh0bywgdGhpcy5fY3JlYXRlTWVzc2FnZShtZXNzYWdlLCB7fSwgaWQpKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gcXVldWUgbWVzc2FnZSBmb3IgcG9zdGluZ1xuXHRcdFx0dGhpcy5fYWRkVG9RdWV1ZSh0bywgbWVzc2FnZSwgaWQpO1xuXHRcdH1cblxuXHRcdHJldHVybiBpZDtcblx0fSxcblxuXHQvKipcblx0ICogQWRkcyBhIG1lc3NhZ2UgdG8gdGhlIGxvY2FsICdvdXRib3gnIGZvciB0aGUgZ3Vlc3QgKGJ5IElEKS5cblx0ICovXG5cdF9hZGRUb1F1ZXVlOiBmdW5jdGlvbih0bywgbWVzc2FnZSwgaWQpIHtcblx0XHRpZiAoIXRoaXMuX3F1ZXVlW3RvXSkge1xuXHRcdFx0dGhpcy5fcXVldWVbdG9dID0gW107XG5cdFx0fVxuXG5cdFx0dGhpcy5fcXVldWVbdG9dLnB1c2goe1xuXHRcdFx0bWVzc2FnZSxcblx0XHRcdGlkXG5cdFx0fSk7XG5cdH0sXG5cblx0X3NlbmRRdWV1ZTogZnVuY3Rpb24odG8pIHtcblx0XHR2YXIgYTtcblxuXHRcdGlmICh0aGlzLl9xdWV1ZVt0b10gJiYgdGhpcy5fZ3Vlc3RzW3RvXSkge1xuXHRcdFx0Ly8gc2VuZCBtZXNzYWdlcyBpbiB0aGUgb3JkZXIgdGhleSB3ZXJlIHF1ZXVlZFxuXHRcdFx0Zm9yIChhID0gMDsgYSA8IHRoaXMuX3F1ZXVlW3RvXS5sZW5ndGg7IGEgKz0gMSkge1xuXHRcdFx0XHR0aGlzLl9wb3N0KFxuXHRcdFx0XHRcdHRoaXMuX2d1ZXN0c1t0b10ubm9kZSxcblx0XHRcdFx0XHR0aGlzLl9jcmVhdGVNZXNzYWdlKFxuXHRcdFx0XHRcdFx0dGhpcy5fcXVldWVbdG9dW2FdLm1lc3NhZ2UsXG5cdFx0XHRcdFx0XHR7fSxcblx0XHRcdFx0XHRcdHRoaXMuX3F1ZXVlW3RvXVthXS5pZFxuXHRcdFx0XHRcdClcblx0XHRcdFx0KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gY2xlYXIgcXVldWUgZm9yIHRoaXMgcmVjaXBpZW50XG5cdFx0XHR0aGlzLl9xdWV1ZVt0b10gPSBbXTtcblx0XHR9XG5cdH0sXG5cblx0LyoqXG5cdCAqIEdldHMgYSBjb21tdW5pY2F0b3IgZ3Vlc3QgYnkgaXRzIElELCBvciByZXR1cm5zIGBudWxsYC5cblx0ICogQHJldHVybnMge21peGVkfSBHdWVzdCBkYXRhLCBvciBgbnVsbGAuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRfZ2V0R3Vlc3RCeUlkOiBmdW5jdGlvbihpZCkge1xuXHRcdHJldHVybiB0aGlzLl9ndWVzdHNbaWRdIHx8IG51bGw7XG5cdH0sXG5cblx0LyoqXG5cdCAqIEdldCBhIGd1ZXN0IGJ5IGtub3duIG5vZGUgKGkuZS4gdGhhdCByZWdpc3RlcmVkIGluIGB0aGlzLl9ndWVzdHNgKVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0X2dldEd1ZXN0QnlOb2RlOiBmdW5jdGlvbihub2RlKSB7XG5cdFx0dmFyIGlkO1xuXG5cdFx0Zm9yIChpZCBpbiB0aGlzLl9ndWVzdHMpIHtcblx0XHRcdGlmICh0aGlzLl9ndWVzdHMuaGFzT3duUHJvcGVydHkoaWQpICYmXG5cdFx0XHRcdHRoaXMuX2d1ZXN0c1tpZF0ubm9kZSA9PT0gbm9kZSkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fZ2V0R3Vlc3RCeUlkKGlkKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fSxcblxuXHQvKipcblx0ICogQWN0dWFsbHkgcG9zdHMgdGhlIG1lc3NhZ2UgdG8gdGhlIGRlc3RpbmF0aW9uLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdG8gLSBHdWVzdCBJRC5cblx0ICogQHBhcmFtIHttaXhlZH0gbWVzc2FnZSAtIEFueSBKUyBjb21wYXRpYmxlIGRhdGEgdG8gc2VuZCBhcyBhIG1lc3NhZ2UuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRfcG9zdDogZnVuY3Rpb24odG8sIG1lc3NhZ2UpIHtcblx0XHR2YXIgZ3Vlc3QsIG5vZGU7XG5cblx0XHRpZiAodHlwZW9mIHRvID09PSAnc3RyaW5nJykge1xuXHRcdFx0Z3Vlc3QgPSB0aGlzLl9nZXRHdWVzdEJ5SWQodG8pO1xuXG5cdFx0XHRpZiAoIWd1ZXN0Lm5vZGUpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHRcdCdDYW5ub3QgY29tbXVuaWNhdGUgd2l0aCBndWVzdCBcIicgKyB0byArICdcIi4gSGFzIGl0cyBOb2RlIGFkZHJlc3MgYmVlbiByZWdpc3RlcmVkPydcblx0XHRcdFx0KTtcblx0XHRcdH1cblxuXHRcdFx0bm9kZSA9IGd1ZXN0Lm5vZGU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5vZGUgPSB0bztcblx0XHR9XG5cblx0XHRub2RlLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIHRoaXMuX29yaWdpbik7XG5cdH0sXG5cblx0LyoqXG5cdCAqIEludm9rZWQgd2hlbiBhIGxpdmUgbWVzc2FnZSBpcyByZWNlaXZlZC5cblx0ICogQHByaXZhdGVcblx0ICovXG5cdF9yZWNlaXZlTWVzc2FnZTogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR2YXIgb3JpZ2luID0gZXZlbnQub3JpZ2luIHx8IGV2ZW50Lm9yaWdpbmFsRXZlbnQub3JpZ2luLFxuXHRcdFx0c291cmNlID0gZXZlbnQuc291cmNlIHx8IGV2ZW50Lm9yaWdpbmFsRXZlbnQuc291cmNlLFxuXHRcdFx0bWVzc2FnZSA9IGV2ZW50LmRhdGEsXG5cdFx0XHRndWVzdDtcblxuXHRcdGlmIChvcmlnaW4gIT09IGxvY2F0aW9uLm9yaWdpbilcblx0XHRcdHJldHVybjtcblxuXHRcdGlmICgobWVzc2FnZS5waW5nIHx8IG1lc3NhZ2UucG9uZykgJiYgdGhpcy5fZ2V0R3Vlc3RCeU5vZGUoc291cmNlKSkge1xuXHRcdFx0Ly8gcmVjZWl2ZWQgYSBwaW5nL3BvbmcgZnJvbSB2YWxpZCBzb3VyY2Vcblx0XHRcdGd1ZXN0ID0gbWVzc2FnZS5waW5nIHx8IG1lc3NhZ2UucG9uZztcblxuXHRcdFx0dGhpcy5fc2V0R3Vlc3RMaXZlKGd1ZXN0KTtcblx0XHRcdHRoaXMuX3NlbmRRdWV1ZShndWVzdCk7XG5cblx0XHRcdGlmIChtZXNzYWdlLnBpbmcpIHtcblx0XHRcdFx0Ly8gcG9uZyBiYWNrIGEgcGluZyAoZG9uJ3QgcG9uZyBhIHBvbmcgb3Igd2UnbGwgYmUgaGVyZSBmb3JldmVyKVxuXHRcdFx0XHR0aGlzLl9zZW5kUG9uZyhzb3VyY2UpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICh0aGlzLl9jYWxsYmFja3MubWVzc2FnZSAmJiBtZXNzYWdlLm9yaWdpbmFsTWVzc2FnZSkge1xuXHRcdFx0dGhpcy5fY2FsbGJhY2tzLm1lc3NhZ2UoXG5cdFx0XHRcdG1lc3NhZ2Uub3JpZ2luYWxNZXNzYWdlLFxuXHRcdFx0XHRtZXNzYWdlLmlkXG5cdFx0XHQpO1xuXHRcdH1cblx0fSxcblxuXHRfc2V0R3Vlc3RMaXZlOiBmdW5jdGlvbihpZCkge1xuXHRcdHRoaXMuX3NldEd1ZXN0RGF0YShpZCwge1xuXHRcdFx0bGl2ZTogdHJ1ZVxuXHRcdH0pO1xuXHR9LFxuXG5cdF9jcmVhdGVNZXNzYWdlOiBmdW5jdGlvbihtZXNzYWdlLCBkYXRhLCBpZCkge1xuXHRcdHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBkYXRhLCB7XG5cdFx0XHRob3N0OiB0aGlzLmlkLFxuXHRcdFx0aWQ6IGlkLFxuXHRcdFx0b3JpZ2luYWxNZXNzYWdlOiBtZXNzYWdlXG5cdFx0fSk7XG5cdH0sXG5cblx0X2dlbmVyYXRlU2VuZElkOiBmdW5jdGlvbihwcmVmaXgpIHtcblx0XHRpZiAod2luZG93LnBlcmZvcm1hbmNlICYmICgnbm93JyBpbiB3aW5kb3cucGVyZm9ybWFuY2UpKSB7XG5cdFx0XHRyZXR1cm4gcHJlZml4ICsgJy14eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcblx0XHRcdFx0dmFyIHIgPSAod2luZG93LnBlcmZvcm1hbmNlLm5vdygpICsgTWF0aC5yYW5kb20oKSAqIDE2KSAlIDE2IHwgMDtcblx0XHRcdFx0cmV0dXJuIChjID09PSAneCcgPyByIDogKHIgJiAweDMgfCAweDgpKS50b1N0cmluZygxNik7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHByZWZpeCArICctJyArICh0aGlzLm1lc3NhZ2VfaW5kZXgrKyk7XG5cdFx0fVxuXHR9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDb21tdW5pY2F0b3I7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9uanAtdGFnL3NyYy9saWIvQ29tbXVuaWNhdG9yLmpzIiwiLyoqXG4gKiBAbW9kdWxlIGFzc2V0cy9jb25zdGFudHNcbiAqL1xuXG4vKipcbiAqIEFjdGlvbiB0eXBlc1xuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IGFjdGlvblR5cGVzID0ge1xuXHRVSV9TVEFURTogJ3VpLXN0YXRlJyxcblx0Wk9ORV9BRERfQVRUQUNITUVOVDogJ3pvbmUtYWRkLWF0dGFjaG1lbnQnLFxuXHRaT05FX0VESVRfQVRUQUNITUVOVDogJ3pvbmUtZWRpdC1hdHRhY2htZW50Jyxcblx0Wk9ORV9ERVRBQ0hfQVRUQUNITUVOVDogJ3pvbmUtZGV0YWNoLWF0dGFjaG1lbnQnLFxuXHRaT05FX0NMRUFSX0FMTF9BVFRBQ0hNRU5UUzogJ3pvbmUtY2xlYXItYWxsLWF0dGFjaG1lbnRzJyxcblx0U0VUX0RJQUxPR19NT0RFOiAnc2V0LWRpYWxvZy1tb2RlJyxcblx0U0VUX0FDVElWRV9EUk9QTEVUOiAnc2V0LWFjdGl2ZS1kcm9wbGV0Jyxcblx0U0VUX1RPVVJfU1RBR0U6ICdzZXQtdG91ci1zdGFnZScsXG5cdFNIT1dfVE9PTFRJUDogJ3Nob3ctdG9vbHRpcCcsXG5cdEhJREVfVE9PTFRJUDogJ2hpZGUtdG9vbHRpcCcsXG5cdFNFVF9UT09MVElQX0NPTlRFTlQ6ICdzZXQtdG9vbHRpcC1jb250ZW50Jyxcblx0Q09NUExFVEVfRklSU1RfRFJPUDogJ2NvbXBsZXRlLWZpcnN0LWRyb3AnLFxuXHRDT01QTEVURV9MQVNUX0RST1A6ICdjb21wbGV0ZS1sYXN0LWRyb3AnLFxuXHRSRVNFVF9BUFA6ICdyZXNldC1hcHAnXG59O1xuXG4vKipcbiAqIERpYWxvZyBtb2Rlc1xuICovXG5leHBvcnQgY29uc3QgZGlhbG9nTW9kZXMgPSB7XG5cdE5PTkU6ICdub25lJyxcblx0R0VORVJBTDogJ2dlbmVyYWwnLFxuXHRFRElUX0RST1BMRVQ6ICdlZGl0LWRyb3BsZXQnLFxuXHRUT1VSOiAndG91cidcbn07XG5cbmV4cG9ydCBjb25zdCB1aVN0YXRlcyA9IHtcblx0SU5JVElBTElTSU5HOiAnaW5pdGlhbGlzaW5nJyxcblx0QUNUSVZFOiAnYWN0aXZlJ1xufTtcblxuZXhwb3J0IGNvbnN0IG1lc3NhZ2VDb21tYW5kcyA9IHtcblx0UkVMT0FEOiAncmVsb2FkJyxcblx0UkVTRVQ6ICdyZXNldCcsXG5cdERJQUxPRzogJ2RpYWxvZycsXG5cdERJQUxPR19DQUxMQkFDSzogJ2RpYWxvZy1jYWxsYmFjaydcbn07XG5cbmV4cG9ydCBjb25zdCBlcnJvckNvZGVzID0ge1xuXHROT1RfQV9EUk9QTEVUOiAnQSB2YWxpZCBEcm9wbGV0IGluc3RhbmNlIG11c3QgYmUgcGFzc2VkIHRvIERyb3Bab25lI3dpbGxBY2NlcHQuJ1xufTtcblxuZXhwb3J0IGNvbnN0IHNldExhYmVscyA9IHtcblx0dmFsdWU6ICdWYWx1ZScsXG5cdGF0dHJzOiAnQXR0cmlidXRlcycsXG5cdHRhZ05hbWU6ICdUYWcgbmFtZScsXG5cdGlubmVySFRNTDogJ0hUTUwgY29udGVudCdcbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9uanAtdGFnL3NyYy9hc3NldHMvY29uc3RhbnRzLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==