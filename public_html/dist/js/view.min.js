/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "dist/js/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 292);
/******/ })
/************************************************************************/
/******/ ({

/***/ 10:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
var actionTypes = exports.actionTypes = {
	UI_STATE: 'ui-state',
	ZONE_ADD_ATTACHMENT: 'zone-add-attachment',
	ZONE_EDIT_ATTACHMENT: 'zone-edit-attachment',
	ZONE_DETACH_ATTACHMENT: 'zone-detach-attachment',
	SET_DIALOG_MODE: 'set-dialog-mode',
	SET_ACTIVE_DROPLET: 'set-active-droplet'
};

var dialogModes = exports.dialogModes = {
	NONE: 'none',
	EDIT_DROPLET: 'edit-droplet'
};

var uiStates = exports.uiStates = {
	INITIALISING: 'initialising',
	ACTIVE: 'active'
};

var messageCommands = exports.messageCommands = {
	RELOAD: 'reload'
};

var errorCodes = exports.errorCodes = {
	NOT_A_DROPLET: 'A valid Droplet instance must be passed to DropZone#willAccept.'
};

var setLabels = exports.setLabels = {
	value: 'Value',
	attrs: 'Attributes',
	tagName: 'Tag name',
	innerHTML: 'HTML content'
};

/***/ }),

/***/ 108:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _Communicator = __webpack_require__(39);

var _Communicator2 = _interopRequireDefault(_Communicator);

var _constants = __webpack_require__(10);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var View = function View() {
	var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

	this.settings = settings;
	this._comms = new _Communicator2.default('view', window.location.origin, {
		message: this._handleAppMessage.bind(this)
	});

	this._comms.registerGuestAddress('app', window.top);

	this.scripts = [];
};

View.prototype = {
	_handleAppMessage: function _handleAppMessage(message) {
		// console.log('message to "view"!', message);

		if (message.cmd === _constants.messageCommands.RELOAD) {
			// reload request
			// console.log('reloading...');
			// console.log(message.data);
			this.settings.container.innerHTML = message.data.markup;

			this._evalScripts();
		}
	},

	/**
  * Gather scripts (besides view script) and re-insert in order
  */
	_evalScripts: function _evalScripts() {
		var _this = this;

		this.scripts = [];

		document.querySelectorAll('.view script').forEach(function (script, index) {
			var new_script;

			new_script = document.createElement('script');
			new_script.src = script.src;
			new_script.type = script.type;
			new_script.onload = function () {
				this._loadScript(index + 1);
			}.bind(_this);

			_this.scripts.push({
				new: new_script,
				old: script
			});
		});

		this._loadScript(0);
	},

	_loadScript: function _loadScript(index) {
		if (this.scripts[index]) {
			this.scripts[index].old.parentNode.replaceChild(this.scripts[index].new, this.scripts[index].old);
		}
	}
};

exports.default = View;

/***/ }),

/***/ 292:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


// require.ensure([], () => {
var View = __webpack_require__(108).default;

new View({
	container: document.querySelector('.view')
});
// }, 'view');

/***/ }),

/***/ 39:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
var localStorage = window.localStorage,
    JSON = JSON || window.JSON;

/**
 * from https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API
 */
var checkStorage = function checkStorage(type) {
	try {
		var storage = window[type],
		    x = '__tag_storage_test__';
		storage.setItem(x, x);
		storage.removeItem(x);
		return true;
	} catch (e) {
		return false;
	}
};

var Communicator = function Communicator(id, origin) {
	var callbacks = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

	if (!checkStorage('localStorage')) {
		return false;
	}

	if (typeof id !== 'string') {
		throw new Error('Please choose a string-based ID for the guest.');
	}

	if (typeof origin !== 'string') {
		throw new Error('Please choose a string-based origin address.');
	}

	this._settings = {
		name: 'tag-comm-data'
	};

	this._guests = {};
	this._queue = {};
	this.id = id;

	this._origin = origin;
	this._callbacks = Object.assign({
		message: null
	}, callbacks);

	window.addEventListener('message', this._receiveMessage.bind(this), false);

	this._sendPing();
};

Communicator.prototype = {
	/**
  * Attempt to ping source window
  */
	_sendPing: function _sendPing(node) {
		var ping = this._createMessage(null, {
			ping: this.id
		});

		if (!node) {
			if (window.opener) {
				node = window.opener;
			} else if (window.top !== window) {
				node = window.top;
			}
		}

		if (node) {
			// console.log(this.id + ' >> ping!');
			this._post(node, ping);
		}
	},

	_sendPong: function _sendPong(node) {
		var pong = this._createMessage(null, {
			pong: this.id
		});

		// console.log('pong! << ' + this.id);
		this._post(node, pong);
	},

	/**
  * Registers a single guest for communication purposes.
  * @param {string} id - Guest ID. Used when sending messages.
  * @param {mixed} dest - Destination node.
  */
	registerGuestAddress: function registerGuestAddress(id, dest) {
		if (typeof dest === 'undefined') {
			throw new Error('Cannot register address for ' + id + '. ' + 'A guest address DOM node, window or frame must be defined.');
		}

		if (!('postMessage' in dest)) {
			throw new Error('Communicator cannot send messages to destination. Please choose an HTMLElement ' + 'that supports the postMessage method');
		}

		if (typeof id !== 'string') {
			throw new Error('Please choose a string-based ID for the guest.');
		}

		// register local address for guest
		this._setGuestData(id, {
			id: id,
			node: dest
		});

		// start timer
		if (this.timer) {
			window.clearInterval(this.timer);
		}
	},

	/**
  * Sets or replaces the guest data.
  * @param {string} id - Guest ID.
  * @param {object} data - Guest data.
  * @private
  */
	_setGuestData: function _setGuestData(id, data) {
		if (!this._guests[id]) {
			this._guests[id] = {
				live: false,
				node: null
			};
		}

		Object.assign(this._guests[id], data);
	},

	/**
  * Sends a message to the defined guest.
  * @param {string} to - Guest ID, as stored.
  * @param {mixed} message - Any JS compatible data to send as a message.
  */
	send: function send(to, message) {
		var guest = this._getGuestById(to);

		if (guest && guest.live) {
			// post message immediately
			this._post(to, this._createMessage(message));
		} else {
			// queue message for posting
			this._addToQueue(to, message);
		}
	},

	/**
  * Adds a message to the local 'outbox' for the guest (by ID).
  */
	_addToQueue: function _addToQueue(to, message) {
		if (!this._queue[to]) {
			this._queue[to] = [];
		}

		this._queue[to].push(message);
	},

	_sendQueue: function _sendQueue(to) {
		var a;

		if (this._queue[to] && this._guests[to]) {
			// send messages in the order they were queued
			for (a = 0; a < this._queue[to].length; a += 1) {
				this._post(this._guests[to].node, this._createMessage(this._queue[to][a]));
			}

			// clear queue for this recipient
			this._queue[to] = [];
		}
	},

	/**
  * Gets a communicator guest by its ID, or returns `null`.
  * @returns {mixed} Guest data, or `null`.
  * @private
  */
	_getGuestById: function _getGuestById(id) {
		return this._guests[id] || null;
	},

	/**
  * Get a guest by known node (i.e. that registered in `this._guests`)
  * @private
  */
	_getGuestByNode: function _getGuestByNode(node) {
		var id;

		// console.group('_getGuestByNode');
		// console.log('finding', node);

		for (id in this._guests) {
			// console.log(id, this._guests[id], (this._guests[id].node === node));
			if (this._guests.hasOwnProperty(id) && this._guests[id].node === node) {
				// console.log('node found!', id);
				return this._getGuestById(id);
			}
		}
		// console.groupEnd();

		return null;
	},

	/**
  * Actually posts the message to the destination.
  * @param {string} to - Guest ID.
  * @param {mixed} message - Any JS compatible data to send as a message.
  * @private
  */
	_post: function _post(to, message) {
		var guest, node;

		if (typeof to === 'string') {
			guest = this._getGuestById(to);

			if (!guest.node) {
				throw new Error('Cannot communicate with guest "' + to + '". Has its Node address been registered?');
			}

			node = guest.node;
		} else {
			node = to;
		}

		node.postMessage(message, this._origin);
	},

	/**
  * Invoked when a live message is received.
  * @private
  */
	_receiveMessage: function _receiveMessage(event) {
		var origin = event.origin || event.originalEvent.origin,
		    source = event.source || event.originalEvent.source,
		    message = event.data,
		    guest;

		// console.group('_receiveMessage');
		// console.log('to "' + this.id + '":', event.data);
		if (origin !== location.origin) return;

		if ((message.ping || message.pong) && this._getGuestByNode(source)) {
			// received a ping/pong from valid source
			guest = message.ping || message.pong;
			// console.log(this.id, 'setting guest "', guest, '" live');
			this._setGuestLive(guest);
			this._sendQueue(guest);

			if (message.ping) {
				// pong back a ping (don't pong a pong or we'll be here forever)
				this._sendPong(source);
			}
		}

		if (this._callbacks.message && message.originalMessage) {
			this._callbacks.message(message.originalMessage);
		}

		// console.groupEnd();
	},

	_setGuestLive: function _setGuestLive(id) {
		this._setGuestData(id, {
			live: true
		});
	},

	_createMessage: function _createMessage(message, data) {
		return Object.assign({}, data, {
			host: this.id,
			originalMessage: message
		});
	}
};

exports.default = Communicator;

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMDRiMTk4OGU1YmEyNDhlNzE5YTE/ZDA5YSIsIndlYnBhY2s6Ly8vLi9+L25qcC10YWcvc3JjL2Fzc2V0cy9jb25zdGFudHMuanM/ZjlkNCIsIndlYnBhY2s6Ly8vLi9+L25qcC10YWcvc3JjL1ZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3ZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9uanAtdGFnL3NyYy9saWIvQ29tbXVuaWNhdG9yLmpzPzI1NzQiXSwibmFtZXMiOlsiYWN0aW9uVHlwZXMiLCJVSV9TVEFURSIsIlpPTkVfQUREX0FUVEFDSE1FTlQiLCJaT05FX0VESVRfQVRUQUNITUVOVCIsIlpPTkVfREVUQUNIX0FUVEFDSE1FTlQiLCJTRVRfRElBTE9HX01PREUiLCJTRVRfQUNUSVZFX0RST1BMRVQiLCJkaWFsb2dNb2RlcyIsIk5PTkUiLCJFRElUX0RST1BMRVQiLCJ1aVN0YXRlcyIsIklOSVRJQUxJU0lORyIsIkFDVElWRSIsIm1lc3NhZ2VDb21tYW5kcyIsIlJFTE9BRCIsImVycm9yQ29kZXMiLCJOT1RfQV9EUk9QTEVUIiwic2V0TGFiZWxzIiwidmFsdWUiLCJhdHRycyIsInRhZ05hbWUiLCJpbm5lckhUTUwiLCJWaWV3Iiwic2V0dGluZ3MiLCJfY29tbXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsIm9yaWdpbiIsIm1lc3NhZ2UiLCJfaGFuZGxlQXBwTWVzc2FnZSIsImJpbmQiLCJyZWdpc3Rlckd1ZXN0QWRkcmVzcyIsInRvcCIsInNjcmlwdHMiLCJwcm90b3R5cGUiLCJjbWQiLCJjb250YWluZXIiLCJkYXRhIiwibWFya3VwIiwiX2V2YWxTY3JpcHRzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInNjcmlwdCIsImluZGV4IiwibmV3X3NjcmlwdCIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJ0eXBlIiwib25sb2FkIiwiX2xvYWRTY3JpcHQiLCJwdXNoIiwibmV3Iiwib2xkIiwicGFyZW50Tm9kZSIsInJlcGxhY2VDaGlsZCIsInJlcXVpcmUiLCJkZWZhdWx0IiwicXVlcnlTZWxlY3RvciIsImxvY2FsU3RvcmFnZSIsIkpTT04iLCJjaGVja1N0b3JhZ2UiLCJzdG9yYWdlIiwieCIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwiZSIsIkNvbW11bmljYXRvciIsImlkIiwiY2FsbGJhY2tzIiwiRXJyb3IiLCJfc2V0dGluZ3MiLCJuYW1lIiwiX2d1ZXN0cyIsIl9xdWV1ZSIsIl9vcmlnaW4iLCJfY2FsbGJhY2tzIiwiT2JqZWN0IiwiYXNzaWduIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9yZWNlaXZlTWVzc2FnZSIsIl9zZW5kUGluZyIsIm5vZGUiLCJwaW5nIiwiX2NyZWF0ZU1lc3NhZ2UiLCJvcGVuZXIiLCJfcG9zdCIsIl9zZW5kUG9uZyIsInBvbmciLCJkZXN0IiwiX3NldEd1ZXN0RGF0YSIsInRpbWVyIiwiY2xlYXJJbnRlcnZhbCIsImxpdmUiLCJzZW5kIiwidG8iLCJndWVzdCIsIl9nZXRHdWVzdEJ5SWQiLCJfYWRkVG9RdWV1ZSIsIl9zZW5kUXVldWUiLCJhIiwibGVuZ3RoIiwiX2dldEd1ZXN0QnlOb2RlIiwiaGFzT3duUHJvcGVydHkiLCJwb3N0TWVzc2FnZSIsImV2ZW50Iiwib3JpZ2luYWxFdmVudCIsInNvdXJjZSIsIl9zZXRHdWVzdExpdmUiLCJvcmlnaW5hbE1lc3NhZ2UiLCJob3N0Il0sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsbURBQTJDLGNBQWM7O0FBRXpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUNBQTJCLDBCQUEwQixF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QjtBQUFBLE1BR0MyRCxLQUhEOztBQUtBO0FBQ0E7QUFDQSxNQUFJckUsV0FBV0QsU0FBU0MsTUFBeEIsRUFDQzs7QUFFRCxNQUFJLENBQUNDLFFBQVF1RCxJQUFSLElBQWdCdkQsUUFBUTRELElBQXpCLEtBQWtDLEtBQUtjLGVBQUwsQ0FBcUJLLE1BQXJCLENBQXRDLEVBQW9FO0FBQ25FO0FBQ0FYLFdBQVFwRSxRQUFRdUQsSUFBUixJQUFnQnZELFFBQVE0RCxJQUFoQztBQUNBO0FBQ0EsUUFBS29CLGFBQUwsQ0FBbUJaLEtBQW5CO0FBQ0EsUUFBS0csVUFBTCxDQUFnQkgsS0FBaEI7O0FBRUEsT0FBSXBFLFFBQVF1RCxJQUFaLEVBQWtCO0FBQ2pCO0FBQ0EsU0FBS0ksU0FBTCxDQUFlb0IsTUFBZjtBQUNBO0FBQ0Q7O0FBRUQsTUFBSSxLQUFLL0IsVUFBTCxDQUFnQmhELE9BQWhCLElBQTJCQSxRQUFRaUYsZUFBdkMsRUFBd0Q7QUFDdkQsUUFBS2pDLFVBQUwsQ0FBZ0JoRCxPQUFoQixDQUF3QkEsUUFBUWlGLGVBQWhDO0FBQ0E7O0FBRUQ7QUFDQSxFQTdOdUI7O0FBK054QkQsZ0JBQWUsdUJBQVN4QyxFQUFULEVBQWE7QUFDM0IsT0FBS3NCLGFBQUwsQ0FBbUJ0QixFQUFuQixFQUF1QjtBQUN0QnlCLFNBQU07QUFEZ0IsR0FBdkI7QUFHQSxFQW5PdUI7O0FBcU94QlQsaUJBQWdCLHdCQUFTeEQsT0FBVCxFQUFrQlMsSUFBbEIsRUFBd0I7QUFDdkMsU0FBT3dDLE9BQU9DLE1BQVAsQ0FBYyxFQUFkLEVBQWtCekMsSUFBbEIsRUFBd0I7QUFDOUJ5RSxTQUFNLEtBQUsxQyxFQURtQjtBQUU5QnlDLG9CQUFpQmpGO0FBRmEsR0FBeEIsQ0FBUDtBQUlBO0FBMU91QixDQUF6Qjs7a0JBNk9ldUMsWSIsImZpbGUiOiJ2aWV3Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcImRpc3QvanMvXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMjkyKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAwNGIxOTg4ZTViYTI0OGU3MTlhMSIsImV4cG9ydCBjb25zdCBhY3Rpb25UeXBlcyA9IHtcblx0VUlfU1RBVEU6ICd1aS1zdGF0ZScsXG5cdFpPTkVfQUREX0FUVEFDSE1FTlQ6ICd6b25lLWFkZC1hdHRhY2htZW50Jyxcblx0Wk9ORV9FRElUX0FUVEFDSE1FTlQ6ICd6b25lLWVkaXQtYXR0YWNobWVudCcsXG5cdFpPTkVfREVUQUNIX0FUVEFDSE1FTlQ6ICd6b25lLWRldGFjaC1hdHRhY2htZW50Jyxcblx0U0VUX0RJQUxPR19NT0RFOiAnc2V0LWRpYWxvZy1tb2RlJyxcblx0U0VUX0FDVElWRV9EUk9QTEVUOiAnc2V0LWFjdGl2ZS1kcm9wbGV0J1xufTtcblxuZXhwb3J0IGNvbnN0IGRpYWxvZ01vZGVzID0ge1xuXHROT05FOiAnbm9uZScsXG5cdEVESVRfRFJPUExFVDogJ2VkaXQtZHJvcGxldCdcbn07XG5cbmV4cG9ydCBjb25zdCB1aVN0YXRlcyA9IHtcblx0SU5JVElBTElTSU5HOiAnaW5pdGlhbGlzaW5nJyxcblx0QUNUSVZFOiAnYWN0aXZlJ1xufTtcblxuZXhwb3J0IGNvbnN0IG1lc3NhZ2VDb21tYW5kcyA9IHtcblx0UkVMT0FEOiAncmVsb2FkJ1xufTtcblxuZXhwb3J0IGNvbnN0IGVycm9yQ29kZXMgPSB7XG5cdE5PVF9BX0RST1BMRVQ6ICdBIHZhbGlkIERyb3BsZXQgaW5zdGFuY2UgbXVzdCBiZSBwYXNzZWQgdG8gRHJvcFpvbmUjd2lsbEFjY2VwdC4nXG59O1xuXG5leHBvcnQgY29uc3Qgc2V0TGFiZWxzID0ge1xuXHR2YWx1ZTogJ1ZhbHVlJyxcblx0YXR0cnM6ICdBdHRyaWJ1dGVzJyxcblx0dGFnTmFtZTogJ1RhZyBuYW1lJyxcblx0aW5uZXJIVE1MOiAnSFRNTCBjb250ZW50J1xufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L25qcC10YWcvc3JjL2Fzc2V0cy9jb25zdGFudHMuanMiLCJpbXBvcnQgQ29tbXVuaWNhdG9yIGZyb20gJy4vbGliL0NvbW11bmljYXRvcic7XG5pbXBvcnQgeyBtZXNzYWdlQ29tbWFuZHMgfSBmcm9tICcuL2Fzc2V0cy9jb25zdGFudHMnO1xuXG52YXIgVmlldyA9IGZ1bmN0aW9uKHNldHRpbmdzID0ge30pIHtcblx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuXHR0aGlzLl9jb21tcyA9IG5ldyBDb21tdW5pY2F0b3IoJ3ZpZXcnLCB3aW5kb3cubG9jYXRpb24ub3JpZ2luLCB7XG5cdFx0bWVzc2FnZTogdGhpcy5faGFuZGxlQXBwTWVzc2FnZS5iaW5kKHRoaXMpXG5cdH0pO1xuXG5cdHRoaXMuX2NvbW1zLnJlZ2lzdGVyR3Vlc3RBZGRyZXNzKCdhcHAnLCB3aW5kb3cudG9wKTtcblxuXHR0aGlzLnNjcmlwdHMgPSBbXTtcbn07XG5cblZpZXcucHJvdG90eXBlID0ge1xuXHRfaGFuZGxlQXBwTWVzc2FnZTogZnVuY3Rpb24obWVzc2FnZSkge1xuXHRcdC8vIGNvbnNvbGUubG9nKCdtZXNzYWdlIHRvIFwidmlld1wiIScsIG1lc3NhZ2UpO1xuXG5cdFx0aWYgKG1lc3NhZ2UuY21kID09PSBtZXNzYWdlQ29tbWFuZHMuUkVMT0FEKSB7XG5cdFx0XHQvLyByZWxvYWQgcmVxdWVzdFxuXHRcdFx0Ly8gY29uc29sZS5sb2coJ3JlbG9hZGluZy4uLicpO1xuXHRcdFx0Ly8gY29uc29sZS5sb2cobWVzc2FnZS5kYXRhKTtcblx0XHRcdHRoaXMuc2V0dGluZ3MuY29udGFpbmVyLmlubmVySFRNTCA9IG1lc3NhZ2UuZGF0YS5tYXJrdXA7XG5cblx0XHRcdHRoaXMuX2V2YWxTY3JpcHRzKCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qKlxuXHQgKiBHYXRoZXIgc2NyaXB0cyAoYmVzaWRlcyB2aWV3IHNjcmlwdCkgYW5kIHJlLWluc2VydCBpbiBvcmRlclxuXHQgKi9cblx0X2V2YWxTY3JpcHRzOiBmdW5jdGlvbigpIHtcblx0XHR0aGlzLnNjcmlwdHMgPSBbXTtcblxuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy52aWV3IHNjcmlwdCcpLmZvckVhY2goKHNjcmlwdCwgaW5kZXgpID0+IHtcblx0XHRcdHZhciBuZXdfc2NyaXB0O1xuXG5cdFx0XHRuZXdfc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cdFx0XHRuZXdfc2NyaXB0LnNyYyA9IHNjcmlwdC5zcmM7XG5cdFx0XHRuZXdfc2NyaXB0LnR5cGUgPSBzY3JpcHQudHlwZTtcblx0XHRcdG5ld19zY3JpcHQub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoaXMuX2xvYWRTY3JpcHQoaW5kZXggKyAxKTtcblx0XHRcdH0uYmluZCh0aGlzKTtcblxuXHRcdFx0dGhpcy5zY3JpcHRzLnB1c2goe1xuXHRcdFx0XHRuZXc6IG5ld19zY3JpcHQsXG5cdFx0XHRcdG9sZDogc2NyaXB0XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdHRoaXMuX2xvYWRTY3JpcHQoMCk7XG5cdH0sXG5cblx0X2xvYWRTY3JpcHQ6IGZ1bmN0aW9uKGluZGV4KSB7XG5cdFx0aWYgKHRoaXMuc2NyaXB0c1tpbmRleF0pIHtcblx0XHRcdHRoaXMuc2NyaXB0c1tpbmRleF0ub2xkLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKFxuXHRcdFx0XHR0aGlzLnNjcmlwdHNbaW5kZXhdLm5ldyxcblx0XHRcdFx0dGhpcy5zY3JpcHRzW2luZGV4XS5vbGRcblx0XHRcdCk7XG5cdFx0fVxuXHR9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBWaWV3O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbmpwLXRhZy9zcmMvVmlldy5qcyIsIi8vIHJlcXVpcmUuZW5zdXJlKFtdLCAoKSA9PiB7XG5cdGNvbnN0IFZpZXcgPSByZXF1aXJlKCduanAtdGFnL3NyYy9WaWV3JykuZGVmYXVsdDtcblxuXHRuZXcgVmlldyh7XG5cdFx0Y29udGFpbmVyOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlldycpXG5cdH0pO1xuLy8gfSwgJ3ZpZXcnKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvdmlldy5qcyIsInZhciBsb2NhbFN0b3JhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlLFxuXHRKU09OID0gSlNPTiB8fCB3aW5kb3cuSlNPTjtcblxuLyoqXG4gKiBmcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XZWJfU3RvcmFnZV9BUEkvVXNpbmdfdGhlX1dlYl9TdG9yYWdlX0FQSVxuICovXG5jb25zdCBjaGVja1N0b3JhZ2UgPSBmdW5jdGlvbih0eXBlKSB7XG5cdHRyeSB7XG5cdFx0dmFyIHN0b3JhZ2UgPSB3aW5kb3dbdHlwZV0sXG5cdFx0XHR4ID0gJ19fdGFnX3N0b3JhZ2VfdGVzdF9fJztcblx0XHRzdG9yYWdlLnNldEl0ZW0oeCwgeCk7XG5cdFx0c3RvcmFnZS5yZW1vdmVJdGVtKHgpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9IGNhdGNoKGUpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn07XG5cbnZhciBDb21tdW5pY2F0b3IgPSBmdW5jdGlvbihpZCwgb3JpZ2luLCBjYWxsYmFja3MgPSB7fSkge1xuXHRpZiAoIWNoZWNrU3RvcmFnZSgnbG9jYWxTdG9yYWdlJykpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuXHRcdHRocm93IG5ldyBFcnJvcignUGxlYXNlIGNob29zZSBhIHN0cmluZy1iYXNlZCBJRCBmb3IgdGhlIGd1ZXN0LicpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBvcmlnaW4gIT09ICdzdHJpbmcnKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgY2hvb3NlIGEgc3RyaW5nLWJhc2VkIG9yaWdpbiBhZGRyZXNzLicpO1xuXHR9XG5cblx0dGhpcy5fc2V0dGluZ3MgPSB7XG5cdFx0bmFtZTogJ3RhZy1jb21tLWRhdGEnXG5cdH07XG5cblx0dGhpcy5fZ3Vlc3RzID0ge307XG5cdHRoaXMuX3F1ZXVlID0ge307XG5cdHRoaXMuaWQgPSBpZDtcblxuXHR0aGlzLl9vcmlnaW4gPSBvcmlnaW47XG5cdHRoaXMuX2NhbGxiYWNrcyA9IE9iamVjdC5hc3NpZ24oe1xuXHRcdG1lc3NhZ2U6IG51bGxcblx0fSwgY2FsbGJhY2tzKTtcblxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuX3JlY2VpdmVNZXNzYWdlLmJpbmQodGhpcyksIGZhbHNlKTtcblxuXHR0aGlzLl9zZW5kUGluZygpO1xufTtcblxuQ29tbXVuaWNhdG9yLnByb3RvdHlwZSA9IHtcblx0LyoqXG5cdCAqIEF0dGVtcHQgdG8gcGluZyBzb3VyY2Ugd2luZG93XG5cdCAqL1xuXHRfc2VuZFBpbmc6IGZ1bmN0aW9uKG5vZGUpIHtcblx0XHR2YXIgcGluZyA9IHRoaXMuX2NyZWF0ZU1lc3NhZ2UobnVsbCwge1xuXHRcdFx0cGluZzogdGhpcy5pZFxuXHRcdH0pO1xuXG5cdFx0aWYgKCFub2RlKSB7XG5cdFx0XHRpZiAod2luZG93Lm9wZW5lcikge1xuXHRcdFx0XHRub2RlID0gd2luZG93Lm9wZW5lcjtcblx0XHRcdH0gZWxzZSBpZiAod2luZG93LnRvcCAhPT0gd2luZG93KSB7XG5cdFx0XHRcdG5vZGUgPSB3aW5kb3cudG9wO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChub2RlKSB7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyh0aGlzLmlkICsgJyA+PiBwaW5nIScpO1xuXHRcdFx0dGhpcy5fcG9zdChub2RlLCBwaW5nKTtcblx0XHR9XG5cdH0sXG5cblx0X3NlbmRQb25nOiBmdW5jdGlvbihub2RlKSB7XG5cdFx0dmFyIHBvbmcgPSB0aGlzLl9jcmVhdGVNZXNzYWdlKG51bGwsIHtcblx0XHRcdHBvbmc6IHRoaXMuaWRcblx0XHR9KTtcblxuXHRcdC8vIGNvbnNvbGUubG9nKCdwb25nISA8PCAnICsgdGhpcy5pZCk7XG5cdFx0dGhpcy5fcG9zdChub2RlLCBwb25nKTtcblx0fSxcblxuXHQvKipcblx0ICogUmVnaXN0ZXJzIGEgc2luZ2xlIGd1ZXN0IGZvciBjb21tdW5pY2F0aW9uIHB1cnBvc2VzLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBHdWVzdCBJRC4gVXNlZCB3aGVuIHNlbmRpbmcgbWVzc2FnZXMuXG5cdCAqIEBwYXJhbSB7bWl4ZWR9IGRlc3QgLSBEZXN0aW5hdGlvbiBub2RlLlxuXHQgKi9cblx0cmVnaXN0ZXJHdWVzdEFkZHJlc3M6IGZ1bmN0aW9uKGlkLCBkZXN0KSB7XG5cdFx0aWYgKHR5cGVvZiBkZXN0ID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHQnQ2Fubm90IHJlZ2lzdGVyIGFkZHJlc3MgZm9yICcgKyBpZCArICcuICcgK1xuXHRcdFx0XHQnQSBndWVzdCBhZGRyZXNzIERPTSBub2RlLCB3aW5kb3cgb3IgZnJhbWUgbXVzdCBiZSBkZWZpbmVkLidcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0aWYgKCEoJ3Bvc3RNZXNzYWdlJyBpbiBkZXN0KSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHQnQ29tbXVuaWNhdG9yIGNhbm5vdCBzZW5kIG1lc3NhZ2VzIHRvIGRlc3RpbmF0aW9uLiBQbGVhc2UgY2hvb3NlIGFuIEhUTUxFbGVtZW50ICcgK1xuXHRcdFx0XHQndGhhdCBzdXBwb3J0cyB0aGUgcG9zdE1lc3NhZ2UgbWV0aG9kJ1xuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgY2hvb3NlIGEgc3RyaW5nLWJhc2VkIElEIGZvciB0aGUgZ3Vlc3QuJyk7XG5cdFx0fVxuXG5cdFx0Ly8gcmVnaXN0ZXIgbG9jYWwgYWRkcmVzcyBmb3IgZ3Vlc3Rcblx0XHR0aGlzLl9zZXRHdWVzdERhdGEoaWQsIHtcblx0XHRcdGlkLFxuXHRcdFx0bm9kZTogZGVzdFxuXHRcdH0pO1xuXG5cdFx0Ly8gc3RhcnQgdGltZXJcblx0XHRpZiAodGhpcy50aW1lcikge1xuXHRcdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XG5cdFx0fVxuXHR9LFxuXG5cdC8qKlxuXHQgKiBTZXRzIG9yIHJlcGxhY2VzIHRoZSBndWVzdCBkYXRhLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBHdWVzdCBJRC5cblx0ICogQHBhcmFtIHtvYmplY3R9IGRhdGEgLSBHdWVzdCBkYXRhLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0X3NldEd1ZXN0RGF0YTogZnVuY3Rpb24oaWQsIGRhdGEpIHtcblx0XHRpZiAoIXRoaXMuX2d1ZXN0c1tpZF0pIHtcblx0XHRcdHRoaXMuX2d1ZXN0c1tpZF0gPSB7XG5cdFx0XHRcdGxpdmU6IGZhbHNlLFxuXHRcdFx0XHRub2RlOiBudWxsXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdE9iamVjdC5hc3NpZ24odGhpcy5fZ3Vlc3RzW2lkXSwgZGF0YSk7XG5cdH0sXG5cblx0LyoqXG5cdCAqIFNlbmRzIGEgbWVzc2FnZSB0byB0aGUgZGVmaW5lZCBndWVzdC5cblx0ICogQHBhcmFtIHtzdHJpbmd9IHRvIC0gR3Vlc3QgSUQsIGFzIHN0b3JlZC5cblx0ICogQHBhcmFtIHttaXhlZH0gbWVzc2FnZSAtIEFueSBKUyBjb21wYXRpYmxlIGRhdGEgdG8gc2VuZCBhcyBhIG1lc3NhZ2UuXG5cdCAqL1xuXHRzZW5kOiBmdW5jdGlvbih0bywgbWVzc2FnZSkge1xuXHRcdHZhciBndWVzdCA9IHRoaXMuX2dldEd1ZXN0QnlJZCh0byk7XG5cblx0XHRpZiAoZ3Vlc3QgJiYgZ3Vlc3QubGl2ZSkge1xuXHRcdFx0Ly8gcG9zdCBtZXNzYWdlIGltbWVkaWF0ZWx5XG5cdFx0XHR0aGlzLl9wb3N0KHRvLCB0aGlzLl9jcmVhdGVNZXNzYWdlKG1lc3NhZ2UpKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gcXVldWUgbWVzc2FnZSBmb3IgcG9zdGluZ1xuXHRcdFx0dGhpcy5fYWRkVG9RdWV1ZSh0bywgbWVzc2FnZSk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qKlxuXHQgKiBBZGRzIGEgbWVzc2FnZSB0byB0aGUgbG9jYWwgJ291dGJveCcgZm9yIHRoZSBndWVzdCAoYnkgSUQpLlxuXHQgKi9cblx0X2FkZFRvUXVldWU6IGZ1bmN0aW9uKHRvLCBtZXNzYWdlKSB7XG5cdFx0aWYgKCF0aGlzLl9xdWV1ZVt0b10pIHtcblx0XHRcdHRoaXMuX3F1ZXVlW3RvXSA9IFtdO1xuXHRcdH1cblxuXHRcdHRoaXMuX3F1ZXVlW3RvXS5wdXNoKG1lc3NhZ2UpO1xuXHR9LFxuXG5cdF9zZW5kUXVldWU6IGZ1bmN0aW9uKHRvKSB7XG5cdFx0dmFyIGE7XG5cblx0XHRpZiAodGhpcy5fcXVldWVbdG9dICYmIHRoaXMuX2d1ZXN0c1t0b10pIHtcblx0XHRcdC8vIHNlbmQgbWVzc2FnZXMgaW4gdGhlIG9yZGVyIHRoZXkgd2VyZSBxdWV1ZWRcblx0XHRcdGZvciAoYSA9IDA7IGEgPCB0aGlzLl9xdWV1ZVt0b10ubGVuZ3RoOyBhICs9IDEpIHtcblx0XHRcdFx0dGhpcy5fcG9zdChcblx0XHRcdFx0XHR0aGlzLl9ndWVzdHNbdG9dLm5vZGUsXG5cdFx0XHRcdFx0dGhpcy5fY3JlYXRlTWVzc2FnZSh0aGlzLl9xdWV1ZVt0b11bYV0pXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGNsZWFyIHF1ZXVlIGZvciB0aGlzIHJlY2lwaWVudFxuXHRcdFx0dGhpcy5fcXVldWVbdG9dID0gW107XG5cdFx0fVxuXHR9LFxuXG5cdC8qKlxuXHQgKiBHZXRzIGEgY29tbXVuaWNhdG9yIGd1ZXN0IGJ5IGl0cyBJRCwgb3IgcmV0dXJucyBgbnVsbGAuXG5cdCAqIEByZXR1cm5zIHttaXhlZH0gR3Vlc3QgZGF0YSwgb3IgYG51bGxgLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0X2dldEd1ZXN0QnlJZDogZnVuY3Rpb24oaWQpIHtcblx0XHRyZXR1cm4gdGhpcy5fZ3Vlc3RzW2lkXSB8fCBudWxsO1xuXHR9LFxuXG5cdC8qKlxuXHQgKiBHZXQgYSBndWVzdCBieSBrbm93biBub2RlIChpLmUuIHRoYXQgcmVnaXN0ZXJlZCBpbiBgdGhpcy5fZ3Vlc3RzYClcblx0ICogQHByaXZhdGVcblx0ICovXG5cdF9nZXRHdWVzdEJ5Tm9kZTogZnVuY3Rpb24obm9kZSkge1xuXHRcdHZhciBpZDtcblxuXHRcdC8vIGNvbnNvbGUuZ3JvdXAoJ19nZXRHdWVzdEJ5Tm9kZScpO1xuXHRcdC8vIGNvbnNvbGUubG9nKCdmaW5kaW5nJywgbm9kZSk7XG5cblx0XHRmb3IgKGlkIGluIHRoaXMuX2d1ZXN0cykge1xuXHRcdFx0Ly8gY29uc29sZS5sb2coaWQsIHRoaXMuX2d1ZXN0c1tpZF0sICh0aGlzLl9ndWVzdHNbaWRdLm5vZGUgPT09IG5vZGUpKTtcblx0XHRcdGlmICh0aGlzLl9ndWVzdHMuaGFzT3duUHJvcGVydHkoaWQpICYmXG5cdFx0XHRcdHRoaXMuX2d1ZXN0c1tpZF0ubm9kZSA9PT0gbm9kZSkge1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnbm9kZSBmb3VuZCEnLCBpZCk7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9nZXRHdWVzdEJ5SWQoaWQpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBjb25zb2xlLmdyb3VwRW5kKCk7XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fSxcblxuXHQvKipcblx0ICogQWN0dWFsbHkgcG9zdHMgdGhlIG1lc3NhZ2UgdG8gdGhlIGRlc3RpbmF0aW9uLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdG8gLSBHdWVzdCBJRC5cblx0ICogQHBhcmFtIHttaXhlZH0gbWVzc2FnZSAtIEFueSBKUyBjb21wYXRpYmxlIGRhdGEgdG8gc2VuZCBhcyBhIG1lc3NhZ2UuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRfcG9zdDogZnVuY3Rpb24odG8sIG1lc3NhZ2UpIHtcblx0XHR2YXIgZ3Vlc3QsIG5vZGU7XG5cblx0XHRpZiAodHlwZW9mIHRvID09PSAnc3RyaW5nJykge1xuXHRcdFx0Z3Vlc3QgPSB0aGlzLl9nZXRHdWVzdEJ5SWQodG8pO1xuXG5cdFx0XHRpZiAoIWd1ZXN0Lm5vZGUpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHRcdCdDYW5ub3QgY29tbXVuaWNhdGUgd2l0aCBndWVzdCBcIicgKyB0byArICdcIi4gSGFzIGl0cyBOb2RlIGFkZHJlc3MgYmVlbiByZWdpc3RlcmVkPydcblx0XHRcdFx0KTtcblx0XHRcdH1cblxuXHRcdFx0bm9kZSA9IGd1ZXN0Lm5vZGU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5vZGUgPSB0bztcblx0XHR9XG5cblx0XHRub2RlLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIHRoaXMuX29yaWdpbik7XG5cdH0sXG5cblx0LyoqXG5cdCAqIEludm9rZWQgd2hlbiBhIGxpdmUgbWVzc2FnZSBpcyByZWNlaXZlZC5cblx0ICogQHByaXZhdGVcblx0ICovXG5cdF9yZWNlaXZlTWVzc2FnZTogZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR2YXIgb3JpZ2luID0gZXZlbnQub3JpZ2luIHx8IGV2ZW50Lm9yaWdpbmFsRXZlbnQub3JpZ2luLFxuXHRcdFx0c291cmNlID0gZXZlbnQuc291cmNlIHx8IGV2ZW50Lm9yaWdpbmFsRXZlbnQuc291cmNlLFxuXHRcdFx0bWVzc2FnZSA9IGV2ZW50LmRhdGEsXG5cdFx0XHRndWVzdDtcblxuXHRcdC8vIGNvbnNvbGUuZ3JvdXAoJ19yZWNlaXZlTWVzc2FnZScpO1xuXHRcdC8vIGNvbnNvbGUubG9nKCd0byBcIicgKyB0aGlzLmlkICsgJ1wiOicsIGV2ZW50LmRhdGEpO1xuXHRcdGlmIChvcmlnaW4gIT09IGxvY2F0aW9uLm9yaWdpbilcblx0XHRcdHJldHVybjtcblxuXHRcdGlmICgobWVzc2FnZS5waW5nIHx8IG1lc3NhZ2UucG9uZykgJiYgdGhpcy5fZ2V0R3Vlc3RCeU5vZGUoc291cmNlKSkge1xuXHRcdFx0Ly8gcmVjZWl2ZWQgYSBwaW5nL3BvbmcgZnJvbSB2YWxpZCBzb3VyY2Vcblx0XHRcdGd1ZXN0ID0gbWVzc2FnZS5waW5nIHx8IG1lc3NhZ2UucG9uZztcblx0XHRcdC8vIGNvbnNvbGUubG9nKHRoaXMuaWQsICdzZXR0aW5nIGd1ZXN0IFwiJywgZ3Vlc3QsICdcIiBsaXZlJyk7XG5cdFx0XHR0aGlzLl9zZXRHdWVzdExpdmUoZ3Vlc3QpO1xuXHRcdFx0dGhpcy5fc2VuZFF1ZXVlKGd1ZXN0KTtcblxuXHRcdFx0aWYgKG1lc3NhZ2UucGluZykge1xuXHRcdFx0XHQvLyBwb25nIGJhY2sgYSBwaW5nIChkb24ndCBwb25nIGEgcG9uZyBvciB3ZSdsbCBiZSBoZXJlIGZvcmV2ZXIpXG5cdFx0XHRcdHRoaXMuX3NlbmRQb25nKHNvdXJjZSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuX2NhbGxiYWNrcy5tZXNzYWdlICYmIG1lc3NhZ2Uub3JpZ2luYWxNZXNzYWdlKSB7XG5cdFx0XHR0aGlzLl9jYWxsYmFja3MubWVzc2FnZShtZXNzYWdlLm9yaWdpbmFsTWVzc2FnZSk7XG5cdFx0fVxuXG5cdFx0Ly8gY29uc29sZS5ncm91cEVuZCgpO1xuXHR9LFxuXG5cdF9zZXRHdWVzdExpdmU6IGZ1bmN0aW9uKGlkKSB7XG5cdFx0dGhpcy5fc2V0R3Vlc3REYXRhKGlkLCB7XG5cdFx0XHRsaXZlOiB0cnVlXG5cdFx0fSk7XG5cdH0sXG5cblx0X2NyZWF0ZU1lc3NhZ2U6IGZ1bmN0aW9uKG1lc3NhZ2UsIGRhdGEpIHtcblx0XHRyZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgZGF0YSwge1xuXHRcdFx0aG9zdDogdGhpcy5pZCxcblx0XHRcdG9yaWdpbmFsTWVzc2FnZTogbWVzc2FnZVxuXHRcdH0pO1xuXHR9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDb21tdW5pY2F0b3I7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9uanAtdGFnL3NyYy9saWIvQ29tbXVuaWNhdG9yLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==